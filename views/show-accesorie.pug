extends ./admin-layout.pug
block contenido
  main.main-admin
    button.btn.btn-go-back(onclick = "window.history.back()") 
      img(src="/public/img/admin/atras.png", alt="")
      | Atras
    h3.main-title Editar Accesorio
    section.flex-container-img
      img(src=accesorie.images[0].url class="img-fluid img-thumbnail")
    form(action=`/admin/accesorios/${accesorie._id}?_method=PUT` method='POST' class="form-group" enctype="multipart/form-data")

      input(type="text" class="form-input" name="type"  placeholder="Tipo de accesorios" required value=accesorie.type)

      input(type="text" class="form-input" name="price" placeholder="Precio" value=accesorie.price)

      input(type="text" class="form-input" name="description" placeholder="Descripción" value=accesorie.description)

      input(type="text" class="form-input" name="cnt"  placeholder="Cantidad de articulos" value=accesorie.cnt)

      input(type="text" class="form-input" name="ownerName" placeholder="Nombre del dueño" required value=accesorie.ownerName)

      input(type="text" class="form-input" name="ownerPhone" placeholder="Télefono" required value=accesorie.ownerPhone)

      input(type="text" class="form-input" name="ownerAccount" placeholder="Cuenta bancaria" value=accesorie.ownerAccount)

      label.btn.select-file(for="file-selector") Seleccionar archivo
      div.file-selected  No ha seleccionado ningún archivo
      input(type="file" id="file-selector" class="form-input" name="file" multiple)

      .btn-save-container
        input(type="submit" class="btn btn-save" value="Guardar")
        a.btn.btn-cancel(href="/admin/accesorios") Cancelar
      script.
        const inputFile = document.querySelector("#file-selector");
        const filesSelected = document.querySelector(".file-selected");
        //Esto es para la seleccion de los archivos
        inputFile.addEventListener("change", function(){
            filesSelected.innerHTML = "";
            filesSelected.classList.remove("file-preview");
            const currentFiles = inputFile.files;
            if(currentFiles.length == 0){
              filesSelected.innerHTML = "No ha seleccionado ningún archivo";
            }
            else{
                let textPreview = "";
                for(file of currentFiles){
                  textPreview += `<span>${file.name}</span> `;
                }
                filesSelected.innerHTML = `<h4> Ha seleccionado </h4> ${textPreview}`;
                filesSelected.classList.add("file-preview");
            }
        });